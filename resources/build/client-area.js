(function(){"use strict";var e,t,n,i;e=jQuery,t=e.q,i={},n=window.wp.hooks,function(){var t,n;t=function(){function t(){}return t.prototype.reload=function(){return e(".js__masonry").masonry("layout")},t.prototype.selected=function(){return this.all(),e(".ca-image").filter(function(){return 1!==e(this).find(".is-selected").length}).css("display","none"),this.reload()},t.prototype.unselected=function(){return this.all(),e(".ca-image").filter(function(){return 1===e(this).find(".is-selected").length}).css("display","none"),this.reload()},t.prototype.all=function(){return e(".ca-image").css("display",""),this.reload()},t}(),n=new t,e(document).on("click",".js__ca-action",function(){var t,i;return t=e(this),(i=t.data("action"))?(e(".js__ca-action").removeClass("is-active"),t.addClass("is-active"),n[i]()):void 0})}.call(this),function(){var t,i,a,o;1===e("#ca-preview").length&&(t=-1,n.addAction("theme.resized",function(){t=-1}),i=function(){return e("#ca-preview").css("display","none")},o=function(i,a){var o,r,l,s;if(r=e("#ca-image-"+i),1===r.length){if(t===i)return void e("#ca-preview").css("display","block");o=r.find("img"),e("#ca-preview-content").html(o.clone()),s=a.offset(),l=a.outerHeight(),e("#ca-preview").css(n.applyFilters("client.previewPosition",{top:s.top+l+2,left:s.left,display:"block"})),t=i}},a=function(){var t,n,i;return t=e(this),n=t.text(),i=n.replace(/[^0-9]/g,""),o(i,t)},e(document).on("mouseenter",".ca-preview-link",a).on("mouseleave",".ca-preview-link",i))}.call(this),function(){var t,i,a,o,r,l,s,c,u,d,f;i=null,t=null,a=null,o="",u=function(){var t;return t=[],i.each(function(n,i){var a,o,r;return a=e(i),o=a.find(".js__filter_src"),r=o.text(),t.push({id:a.attr("id"),title:r,el:a.get(0)})}),t},s=function(e,t){var n,i,a,o;for(o=[],n=0,a=e.length;a>n;n++)i=e[n],t.test(i.title)&&o.push(i);return o},l=function(n){var r,l,c,u,d,f,p;if(f=t.val(),f!==o){if(o=f,f.length<1)return i.css("display",""),void e(".masonry").masonry();for(u=a,d=f.split(" "),l=0,c=d.length;c>l;l++)p=d[l],u=s(u,new RegExp(p,"i"));return u.length>0?(r=_.pluck(u,"el"),i.css("display","").not(r).css("display","none"),t.removeClass("not-found")):(i.css("display",""),t.addClass("not-found")),e(".masonry").masonry()}},f=_.throttle(l,750),d=function(e){return t.removeClass("not-found")},r=function(){return t=e("#js__filter-input"),1===t.length?(t.off("keyup",f),t.off("blur",d),i=null,t=null,a=null,o=""):void 0},c=function(){return t=e("#js__filter-input"),1===t.length?(i=e(".js__filter_element"),a=u(),t.on("keyup",f),t.on("blur",d)):void 0},e(document).ready(c),n.addAction("client.filters/init",c),n.addAction("client.filters/destroy",r)}.call(this),function(){var t,n,i;if((null==window.ajax_object||null==window.ajax_object.ajax_url)&&"undefined"!=typeof console&&null!==console&&null!=console.log)throw new Error("Ajax Object is required for Village Client Area");n=function(e,t){return 0===t?e.removeClass("is-selected"):e.addClass("is-selected")},i=function(e,i){return i=0===i?1:0,n(e,i),t(e)},t=function(t){var n,i,a;return i=t.data("imageId"),i||(i=0),n=e(".ca-error__message.js__template").clone().removeClass("js__template"),a=n.text(),a=a.replace("##image_id##","#"+i),n.text(a),n.css("opacity",0).appendTo(e(".ca-error__container")).velocity({properties:{translateY:[0,10],opacity:[1,0]},options:{duration:600}}),n.velocity({properties:"fadeOut",options:{duration:2e3,delay:3e3,easing:"easeInOutQuad",complete:function(){n.remove(),n=null}}})},e(document).on("click",".ca-image .ca-image__meta",function(){var t,a,o,r,l,s;return a=e(this),(r=a.data("imageId"))?(l=a.is(".is-selected")?0:1,a.addClass("is-loading"),o={action:"vca_save_state",attachment_id:r,attachment_state:l},s={type:"POST",url:ajax_object.ajax_url,data:o,dataType:"json",success:function(e){return a.removeClass("is-loading")}},t=e.ajax(s),n(a,l),t.fail(function(){return i(a,l)})):void console.log("AJAX Error: Can't select/unselect an image without an ID")})}.call(this)}).call(this);